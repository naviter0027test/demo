<html>
    <head>
        <title>firebase cloud message</title>
        <meta charset="utf-8" />
    </head>
    <body>
    </body>
    <script src="lib/jquery-2.1.4.min.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-messaging.js"></script>

    <script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
        apiKey: "AIzaSyCdyxuNQitr6c7aZ_wTe1mPFuHiVuAqwRc",
        authDomain: "web-send-msg-test.firebaseapp.com",
        projectId: "web-send-msg-test",
        storageBucket: "web-send-msg-test.appspot.com",
        messagingSenderId: "282801977342",
        appId: "1:282801977342:web:c3fb53d9353a75a15a72af",
        measurementId: "G-EG013LZN77"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    const messaging = firebase.messaging();
    messaging.requestPermission().then(function () {
        console.log('have permission');
        return messaging.getToken();
    }).then(function(token) {
        console.log(token);
    }).catch(function(err) {
        console.log('err', err);
    });

    messaging.onMessage(function (payload) {
        console.log('on message', payload);
    });
        /*
        messaging.getToken({ vapidKey: 'BKZ7LSjarz7gmcmQ2YGaXuecz4sV-HAMOyMyzfyDFsI2ToDN9PPfrt3UbzOmMFsPdV_zFRY1c53kHG8IWoYVkjs'}).then((currentToken) => {
            if(currentToken) {
                console.log('success to registration');
            } else {
                console.log('no registration token available');
            }
        }).catch((err) => {
            console.log('err:', err);
        });
        */
    </script>
</html>
